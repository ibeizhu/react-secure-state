"use strict";(self.webpackChunkreact_secure_state=self.webpackChunkreact_secure_state||[]).push([[39],{55545:function(l,t,a){a.r(t);var d=a(72269),o=a(93359),_=a(61788),x=a(19977),h=a(25809),n=a(90978),v=a(96057),j=a(83213),u=a(53683),i=a(80936),r=a(67294),s=a(58840),e=a(85893);function c(){return(0,e.jsx)(u.dY,{children:(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(i.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"api",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#api",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"API"]}),(0,e.jsxs)("h2",{id:"createstore",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#createstore",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"createStore"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("code",{children:s.texts[0].value}),s.texts[1].value]}),(0,e.jsxs)("p",{children:[s.texts[2].value,(0,e.jsx)("code",{children:s.texts[3].value}),s.texts[4].value,(0,e.jsx)("code",{children:s.texts[5].value}),s.texts[6].value]}),(0,e.jsxs)("h3",{id:"\u7C7B\u578B\u5B9A\u4E49",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u7C7B\u578B\u5B9A\u4E49",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u7C7B\u578B\u5B9A\u4E49"]}),(0,e.jsx)(n.Z,{lang:"tsx",children:s.texts[7].value}),(0,e.jsxs)("h2",{id:"storeprovider",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#storeprovider",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"StoreProvider"]}),(0,e.jsx)("p",{children:s.texts[8].value}),(0,e.jsxs)("h3",{id:"\u7C7B\u578B\u5B9A\u4E49-1",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u7C7B\u578B\u5B9A\u4E49-1",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u7C7B\u578B\u5B9A\u4E49"]}),(0,e.jsx)(n.Z,{lang:"tsx",children:s.texts[9].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:s.texts[10].value}),s.texts[11].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:s.texts[12].value}),s.texts[13].value]})]}),(0,e.jsxs)("h3",{id:"\u7528\u6CD5",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u7528\u6CD5",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u7528\u6CD5"]}),(0,e.jsx)(n.Z,{lang:"tsx",children:s.texts[14].value}),(0,e.jsxs)("h2",{id:"usestorevalues",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#usestorevalues",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"useStoreValues"]}),(0,e.jsxs)("p",{children:[s.texts[15].value,(0,e.jsx)("code",{children:s.texts[16].value}),s.texts[17].value]}),(0,e.jsxs)("h3",{id:"\u7C7B\u578B\u5B9A\u4E49-2",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u7C7B\u578B\u5B9A\u4E49-2",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u7C7B\u578B\u5B9A\u4E49"]}),(0,e.jsx)(n.Z,{lang:"tsx",children:s.texts[18].value}),(0,e.jsx)("p",{children:s.texts[19].value}),(0,e.jsx)("ul",{children:(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:s.texts[20].value}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:s.texts[21].value})})]})}),(0,e.jsx)("p",{children:s.texts[22].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:s.texts[23].value}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:s.texts[24].value})})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:s.texts[25].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:s.texts[26].value}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:s.texts[27].value}),s.texts[28].value]})]})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:s.texts[29].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:s.texts[30].value}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:s.texts[31].value}),s.texts[32].value]})]})]})]}),(0,e.jsxs)("h3",{id:"\u7528\u6CD5-1",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u7528\u6CD5-1",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u7528\u6CD5"]}),(0,e.jsx)(n.Z,{lang:"tsx",children:s.texts[33].value}),(0,e.jsxs)("h2",{id:"\u5178\u578B\u7528\u6CD5",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5178\u578B\u7528\u6CD5",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u5178\u578B\u7528\u6CD5"]}),(0,e.jsx)(n.Z,{lang:"tsx",children:s.texts[34].value})]})})})})}t.default=c},58840:function(l,t,a){a.r(t),a.d(t,{texts:function(){return d}});const d=[{value:"createStore",paraId:0,tocIndex:1},{value:" \u662F\u4E00\u4E2A\u5DE5\u5382\u51FD\u6570\uFF0C\u7528\u4E8E\u751F\u6210 React \u4E0A\u4E0B\u6587 (Context) \u7BA1\u7406\u6307\u5B9A\u5BF9\u8C61\u7C7B\u578B\u7684\u6570\u636E\uFF0C\u7528\u4E8E\u5728\u5E94\u7528\u5185\u90E8\u8FDB\u884C\u5168\u5C40\u72B6\u6001\u7BA1\u7406\u3002",paraId:0,tocIndex:1},{value:"\u901A\u8FC7\u5B83\u53EF\u4EE5\u83B7\u5F97 ",paraId:1,tocIndex:1},{value:"StoreProvider",paraId:1,tocIndex:1},{value:" \u7EC4\u4EF6\u548C ",paraId:1,tocIndex:1},{value:"useStoreValues",paraId:1,tocIndex:1},{value:" Hook\u3002",paraId:1,tocIndex:1},{value:`function createStore<T extends Record<string, any>>(): {
  StoreProvider: React.FC<StoreProviderProps<T>>;
  useStoreValues: <K extends FieldPath<T>>(fields: K[]) => UseStoreValuesReturn<T, K>;
}
`,paraId:2,tocIndex:2},{value:"StoreProvider \u63D0\u4F9B\u4E00\u4E2A\u4E0A\u4E0B\u6587\u5C42\uFF0C\u5C06\u6570\u636E\u5B58\u50A8\u4E8E\u5185\u5B58\u4E2D\uFF0C\u4F9B\u540E\u7EED\u901A\u8FC7 useStoreValues \u8FDB\u884C\u8BFB\u53D6\u53CA\u66F4\u65B0\u3002",paraId:3,tocIndex:3},{value:`interface StoreProviderProps<T> {
  initialValue: T;
  children: React.ReactNode;
}
`,paraId:4,tocIndex:4},{value:"initialValue: T",paraId:5,tocIndex:4},{value:": \u521D\u59CB\u5316 Store \u7684\u503C\uFF0C\u5FC5\u987B\u662F\u4E00\u4E2A\u5BF9\u8C61\u3002",paraId:5,tocIndex:4},{value:"children: React.ReactNode",paraId:5,tocIndex:4},{value:"  \u9700\u8981\u5305\u88F9\u7684\u5B50\u7EC4\u4EF6\u3002",paraId:5,tocIndex:4},{value:`<StoreProvider initialValue={yourInitialData}>
  {/* your components */}
</StoreProvider>
`,paraId:6,tocIndex:5},{value:"\u7528\u4E8E\u7533\u8BF7 Store \u7684\u6570\u636E\uFF0C",paraId:7,tocIndex:6},{value:"useStoreValues",paraId:7,tocIndex:6},{value:" \u4E25\u683C\u63A7\u5236\u5B57\u6BB5\u7684\u6743\u9650",paraId:7,tocIndex:6},{value:`function useStoreValues<K extends FieldPath<T>>(fields: K[]): {
  values: Pick<T, K>;
  setFieldValue: (path: K, value: any) => void;
  setFieldsValue: (fieldsValue: Partial<Record<FieldPath<T>, any>>) => void;
}
`,paraId:8,tocIndex:7},{value:"\u53C2\u6570",paraId:9,tocIndex:7},{value:"fields: K[]",paraId:10,tocIndex:7},{value:"\u9700\u8981\u8BA2\u9605\u548C\u64CD\u4F5C\u7684\u5B57\u6BB5\u540D\u6570\u7EC4\uFF0C\u4EC5\u8FD9\u4E9B\u5B57\u6BB5\u4F1A\u88AB\u4FA6\u542C\u548C\u66B4\u9732\u3002",paraId:11,tocIndex:7},{value:"\u8FD4\u56DE\u5BF9\u8C61",paraId:12,tocIndex:7},{value:"values: Pick<T, K>",paraId:13,tocIndex:7},{value:"\u5F53\u524D\u8BA2\u9605\u5B57\u6BB5\u5BF9\u5E94\u7684\u503C\u5BF9\u8C61\u3002\u4F8B\u5982\uFF1A{ fieldA: valueA, fieldB: valueB }\u3002",paraId:14,tocIndex:7},{value:"setFieldValue: (path: K, value: any) => void",paraId:13,tocIndex:7},{value:"\u66F4\u65B0\u6307\u5B9A\u5B57\u6BB5\u7684\u503C\uFF0C\u4EC5\u5141\u8BB8\u66F4\u65B0\u5728fields\u6CE8\u518C\u8FC7\u7684\u5B57\u6BB5\uFF0C\u5426\u5219\u4F1A\u629B\u9519\u3002",paraId:15,tocIndex:7},{value:"useStoreValues",paraId:15,tocIndex:7},{value:" \u4E25\u683C\u63A7\u5236\u6570\u636E\u7684\u8BFB\u5199\u6743\u9650\uFF0C\u672A\u7533\u8BF7\u7684\u5B57\u6BB5\u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539",paraId:15,tocIndex:7},{value:"setFieldsValue: (fieldsValue: Partial<Record<FieldPath<T>, any>>) => void",paraId:13,tocIndex:7},{value:"\u6279\u91CF\u66F4\u65B0\u591A\u4E2A\u5B57\u6BB5\u503C\uFF0C\u4EC5\u5141\u8BB8\u66F4\u65B0\u5728fields\u6CE8\u518C\u8FC7\u7684\u5B57\u6BB5\uFF0C\u5426\u5219\u4F1A\u629B\u9519\u3002",paraId:16,tocIndex:7},{value:"useStoreValues",paraId:16,tocIndex:7},{value:" \u4E25\u683C\u63A7\u5236\u6570\u636E\u7684\u8BFB\u5199\u6743\u9650\uFF0C\u672A\u7533\u8BF7\u7684\u5B57\u6BB5\u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539",paraId:16,tocIndex:7},{value:`const { values, setFieldValue, setFieldsValue } = useStoreValues(['fieldA', 'fieldB']);

useEffect(() => {
  // \u53D6\u503C
  console.log(values.fieldA);
}, [values]);

// \u8BBE\u7F6E\u5355\u4E2A\u5B57\u6BB5
setFieldValue('fieldA', 'newValueA');

// \u6279\u91CF\u8BBE\u7F6E
setFieldsValue({ fieldA: 123, fieldB: 'abc' });
`,paraId:17,tocIndex:8},{value:`// \u5B9A\u4E49\u7C7B\u578B
type MyStore = {
  count: number;
  user: string;
};

// \u521B\u5EFA store
const { StoreProvider, useStoreValues } = createStore<MyStore>();

// \u5E94\u7528\u9876\u5C42
<StoreProvider initialValue={{ count: 0, user: '' }}>
  <MyComponent />
</StoreProvider>

// \u7EC4\u4EF6\u5185
function MyComponent() {
  const { values, setFieldValue, setFieldsValue } = useStoreValues(['count', 'user']);

  return (
    <div>
      <span>{values.count}</span>
      <button onClick={() => setFieldValue('count', values.count + 1)}>+</button>
    </div>
  );
}
`,paraId:18,tocIndex:9}]}}]);
